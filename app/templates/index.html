<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ramitham | Kerala Art Fest Leaderboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
:root{
    --red:#FF0000;
    --soft:#fff3f3;
}

/* ================= BASE ================= */
body{
    font-family:'Patrick Hand', cursive;
    background: linear-gradient(180deg, #ffeaea, #ffffff);
    overflow-x:hidden;
    position:relative;
}

/* ================= FLOATING KERALA DOODLES ================= */
.doodle{
    position:fixed;
    width:140px;
    opacity:.35;
    z-index:-1;
    animation:float 10s ease-in-out infinite;
}
.d1{top:90px;left:40px}
.d2{top:120px;right:60px;animation-delay:2s}
.d3{bottom:120px;left:50px;animation-delay:4s}
.d4{bottom:90px;right:70px;animation-delay:6s}

@keyframes float{
    0%{transform:translateY(0) rotate(0deg)}
    50%{transform:translateY(-22px) rotate(2deg)}
    100%{transform:translateY(0) rotate(0deg)}
}

/* ================= HERO ================= */
.hero{
    text-align:center;
    padding:60px 15px 40px;
    position:relative;
}

.hero h1{
    font-size:3.4rem;
    font-weight:800;
    color:var(--red);
}

/* brush underline animation */
.hero::after{
    content:"";
    display:block;
    width:220px;
    height:10px;
    margin:14px auto 0;
    background:linear-gradient(90deg, transparent, var(--red), transparent);
    border-radius:20px;
    animation:brush 2s infinite alternate;
}
@keyframes brush{
    from{transform:scaleX(0.7)}
    to{transform:scaleX(1)}
}

.hero h1 span{
    background:var(--red);
    color:white;
    padding:6px 18px;
    border-radius:22px;
}

.hero p{
    font-size:1.2rem;
}

/* ================= BOARD ================= */
.board{
    background:white;
    border-radius:28px;
    padding:26px;
    border:4px dashed var(--red);
    box-shadow:0 24px 55px rgba(0,0,0,.2);
    position:relative;
}

/* sticker labels */
.sticker{
    position:absolute;
    background:var(--red);
    color:white;
    padding:6px 14px;
    border-radius:18px;
    font-size:0.95rem;
    transform:rotate(-8deg);
}
.st1{top:-14px;left:20px}
.st2{top:-14px;right:20px;transform:rotate(6deg)}

/* ================= TABLE ================= */
.leaderboard-table{
    table-layout:fixed;
    width:100%;
}

.col-rank{width:90px}
.col-team{width:40%}
.col-dept{width:30%}
.col-points{width:120px}

thead th{
    text-align:center;
    font-size:1.25rem;
    color:var(--red);
    border-bottom:3px solid var(--red);
}

tbody td{
    text-align:center;
    padding:18px 10px;
    font-size:1.2rem;
}

/* ================= RANK ================= */
.rank-badge{
    display:inline-block;
    width:40px;
    font-size:1.6rem;
}

/* bounce top 3 */
tbody tr:nth-child(1) .rank-badge,
tbody tr:nth-child(2) .rank-badge,
tbody tr:nth-child(3) .rank-badge{
    animation:bounce 2s infinite;
}
@keyframes bounce{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-6px)}
}

/* ================= TEAM ================= */
.team-link{
    text-decoration:none;
    color:black;
}
.team-link:hover{
    color:var(--red);
    text-decoration:underline;
}

/* ================= POINTS ================= */
.points{
    font-size:1.6rem;
    font-weight:800;
    color:var(--red);
}

/* ================= ROW PAINT SPLASH ================= */
tbody tr{
    transition:.25s;
    position:relative;
}
tbody tr:hover{
    background:var(--soft);
}
tbody tr:hover::after{
    content:"üé®";
    position:absolute;
    right:12px;
    font-size:1.5rem;
    animation:splash .4s ease;
}
@keyframes splash{
    from{transform:scale(0)}
    to{transform:scale(1)}
}

/* ================= UPDATE FUN ================= */
.row-updated{
    animation:pop .6s ease;
}
@keyframes pop{
    0%{transform:scale(1)}
    40%{transform:scale(1.15)}
    100%{transform:scale(1)}
}

/* ================= FOOTER ================= */
footer{
    text-align:center;
    padding:22px;
    font-size:1.05rem;
}
</style>
</head>

<body>

<!-- ================= HERO ================= -->
<section class="hero">
    <h1>RAMITHAM <span>2025‚Äì26</span></h1>
    <p>Inter-Department Art & Cultural Fest</p>
    <p>Department Students‚Äô Union ¬∑ Dr Janaki Ammal Campus</p>
</section>

<!-- ================= LEADERBOARD ================= -->
<div class="container pb-5">
<div class="board">

<div class="sticker st1">üé≠ ARTS</div>
<div class="sticker st2">üéâ FEST</div>

<div class="table-responsive" id="leaderboard-container">
<table class="table leaderboard-table align-middle">

<colgroup>
    <col class="col-rank">
    <col class="col-team">
    <col class="col-dept">
    <col class="col-points">
</colgroup>

<thead>
<tr>
    <th>Rank</th>
    <th>Team</th>
    <th>Dept</th>
    <th>Points</th>
</tr>
</thead>

<tbody>
{% for p in points %}
<tr data-team="{{ p.id }}" data-points="{{ p.total_points }}">
<td>
<span class="rank-badge">
{% if forloop.counter == 1 %}ü•á
{% elif forloop.counter == 2 %}ü•à
{% elif forloop.counter == 3 %}ü•â
{% else %}{{ forloop.counter }}{% endif %}
</span>
</td>

<td>
<a href="{% url 'public_team_detail' p.id %}" class="team-link">
{{ p.team_name }}
</a>
</td>

<td>{{ p.department }}</td>
<td class="points">{{ p.total_points }}</td>
</tr>
{% endfor %}
</tbody>

</table>
</div>

</div>
</div>

<footer>
üé≠ üé® üé∂ ü•Å  
<br>
Ramitham 2025‚Äì26 ¬∑ Department Students‚Äô Union
</footer>

<script>
function refreshBoard(){
    fetch(location.href,{headers:{"X-Requested-With":"XMLHttpRequest"}})
    .then(r=>r.text())
    .then(html=>{
        let doc=new DOMParser().parseFromString(html,"text/html");
        let nc=doc.querySelector("#leaderboard-container");
        let oc=document.querySelector("#leaderboard-container");
        if(!nc)return;
        oc.innerHTML=nc.innerHTML;
        document.querySelectorAll(".points").forEach(p=>{
            p.classList.add("row-updated");
            setTimeout(()=>p.classList.remove("row-updated"),600);
        });
    });
}
setInterval(refreshBoard,10000);
</script>

</body>
</html>
